{"ast":null,"code":"import { reqGetCode, register, reqUserLogin, getUserInfo, reqLoginOut } from '@/api';\nimport { setToken, getToken, removeToken } from '@/util/token';\nconst actions = {\n  //获取验证码\n  async getCode({\n    commit\n  }, phone) {\n    let result = await reqGetCode(phone);\n    if (result.code == 200) {\n      commit('getCode', result.data);\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //完成注册\n  async userRegister({\n    commit\n  }, user) {\n    let result = await register(user);\n    if (result.code = 200) {\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //登录--token--服务器下发，前台持久化token 并且拿着token向服务器请求数据\n  async userLogin({\n    commit\n  }, params) {\n    let result = await reqUserLogin(params);\n    if (result.code = 200) {\n      //持久化token\n      setToken(result.data.token);\n      commit('userLogin', result.data);\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //token 获取用户信息\n  async getUserInfo({\n    commit\n  }) {\n    let result = await getUserInfo();\n    if (result.code == 200) {\n      commit('getUserInfo', result.data);\n      return 'ok';\n    }\n  },\n  //退出登录\n  async reqLoginOut() {\n    //通知服务亲清除数据\n    let result = await reqLoginOut();\n    if (result.code == 200) {\n      commit('clearLoginInfo');\n      return 'ok';\n    } else {}\n  }\n};\nconst mutations = {\n  getCode(state, code) {\n    state.code = code;\n  },\n  userLogin(state, data) {\n    state.token = data.token;\n  },\n  getUserInfo(state, data) {\n    state.userInfo = data;\n  },\n  clearLoginInfo(state) {\n    state.token = '';\n    state.userInfo = '';\n    removeToken();\n  }\n};\nconst state = {\n  code: '',\n  token: getToken(),\n  userInfo: {}\n};\nconst getters = {};\nexport default {\n  state,\n  actions,\n  getters,\n  mutations\n};","map":{"version":3,"names":["reqGetCode","register","reqUserLogin","getUserInfo","reqLoginOut","setToken","getToken","removeToken","actions","getCode","commit","phone","result","code","data","Promise","reject","Error","userRegister","user","userLogin","params","token","mutations","state","userInfo","clearLoginInfo","getters"],"sources":["D:/MyProject/pro_sph/src/store/user/index.js"],"sourcesContent":["import {reqGetCode,register,reqUserLogin,getUserInfo,reqLoginOut} from '@/api'\r\nimport {setToken,getToken,removeToken} from '@/util/token'\r\nconst actions={\r\n    //获取验证码\r\n   async getCode({commit},phone){\r\n      let result=await reqGetCode(phone)\r\n      if(result.code==200)\r\n      {\r\n        commit('getCode',result.data)\r\n        return 'ok'\r\n      }else{\r\n        return Promise.reject(new Error('faile'))\r\n      }\r\n    },\r\n    //完成注册\r\n   async userRegister({commit},user){\r\n       let result=await register(user)\r\n       if(result.code=200)\r\n       {\r\n        return 'ok'\r\n       }else{\r\n        return Promise.reject(new Error('faile'))\r\n       }\r\n    },\r\n    //登录--token--服务器下发，前台持久化token 并且拿着token向服务器请求数据\r\n    async userLogin({commit},params){\r\n       let result= await reqUserLogin(params)\r\n       if(result.code=200)\r\n       {\r\n         //持久化token\r\n        setToken(result.data.token)\r\n        commit('userLogin',result.data)\r\n        return 'ok'\r\n       }else{\r\n        return Promise.reject(new Error('faile'))\r\n       }\r\n    },\r\n    //token 获取用户信息\r\n    async getUserInfo({commit}){\r\n        let result= await getUserInfo()\r\n        if(result.code==200)\r\n        {\r\n            commit('getUserInfo',result.data)\r\n            return 'ok'\r\n        }\r\n     },\r\n     //退出登录\r\n    async reqLoginOut(){\r\n        //通知服务亲清除数据\r\n        let result=await reqLoginOut()\r\n        if(result.code==200)\r\n        {\r\n            commit('clearLoginInfo')\r\n            return 'ok'\r\n        }else{\r\n\r\n        }\r\n     }\r\n}\r\nconst mutations={\r\n    getCode(state,code){\r\n        state.code=code\r\n    },\r\n    userLogin(state,data){\r\n        state.token=data.token\r\n    },\r\n    getUserInfo(state,data){\r\n        state.userInfo=data\r\n    },\r\n    clearLoginInfo(state){\r\n        state.token=''\r\n        state.userInfo=''\r\n        removeToken()\r\n    }\r\n}\r\nconst state={\r\n    code:'',\r\n    token:getToken(),\r\n    userInfo:{}\r\n}\r\nconst getters={}\r\nexport default{\r\n    state,\r\n    actions,\r\n    getters,\r\n    mutations\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}