{"ast":null,"code":"import { reqsubmitOrder } from '@/api';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'Trade',\n  data() {\n    return {\n      msg: '' //买家留言\n    };\n  },\n\n  computed: {\n    ...mapState({\n      addressInfo: state => state.trade.addressList,\n      orderList: state => state.trade.tradeList\n    }),\n    //结算地址\n    userDefaultAddress() {\n      //find 返回符合条件的数据\n      return this.addressInfo.find(item => item.isDefault == 1) || [];\n    }\n  },\n  methods: {\n    //修改默认地址\n    changeDefault(address, addressInfo) {\n      // console.log(addressInfo==this.addressInfo) true\n      addressInfo.forEach(item => {\n        item.isDefault = 0;\n      });\n      address.isDefault = 1;\n    },\n    //不用vuex 进行请求\n    submitOrder() {\n      reqsubmitOrder;\n    }\n  },\n  mounted() {\n    this.$store.dispatch('getAddressList');\n    this.$store.dispatch('getTradeList');\n  }\n};","map":{"version":3,"names":["reqsubmitOrder","mapState","name","data","msg","computed","addressInfo","state","trade","addressList","orderList","tradeList","userDefaultAddress","find","item","isDefault","methods","changeDefault","address","forEach","submitOrder","mounted","$store","dispatch"],"sources":["src/pages/Trade/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"trade-container\">\r\n    <h3 class=\"title\">填写并核对订单信息</h3>\r\n    <div class=\"content\">\r\n      <h5 class=\"receive\">收件人信息</h5>\r\n      <div class=\"address clearFix\" v-for=\"address in addressInfo\" :key=\"address.id\">\r\n        <span class=\"username \" :class=\"{selected:address.isDefault==1}\">{{ address.consignee }}</span>\r\n        <p @click=\"changeDefault(address,addressInfo)\">\r\n          <span class=\"s1\">{{ address.fullAddress }}</span>\r\n          <span class=\"s2\">{{ address.phoneNum }}</span>\r\n          <span class=\"s3\" v-show=\"address.isDefault==1\">默认地址</span>\r\n        </p>\r\n      </div>\r\n      <div class=\"line\"></div>\r\n      <h5 class=\"pay\">支付方式</h5>\r\n      <div class=\"address clearFix\">\r\n        <span class=\"username selected\">在线支付</span>\r\n        <span class=\"username\" style=\"margin-left:5px;\">货到付款</span>\r\n\r\n      </div>\r\n      <div class=\"line\"></div>\r\n      <h5 class=\"pay\">送货清单</h5>\r\n      <div class=\"way\">\r\n        <h5>配送方式</h5>\r\n        <div class=\"info clearFix\">\r\n          <span class=\"s1\">天天快递</span>\r\n          <p>配送时间：预计8月10日（周三）09:00-15:00送达</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"detail\">\r\n        <h5>商品清单</h5>\r\n        <ul class=\"list clearFix\" v-for=\"order in orderList.detailArrayList\" :key=\"order.skuId\">\r\n          <li>\r\n            <img :src=\"order.imgUrl\" alt=\"\" style=\"width: 100px; height: 100px;\">\r\n          </li>\r\n          <li>\r\n            <p>{{ order.skuName }}</p>\r\n            <h4>7天无理由退货</h4>\r\n          </li>\r\n          <li>\r\n            <h3>￥{{ order.price }}.00</h3>\r\n          </li>\r\n          <li>{{ order.skuNum}}</li>\r\n          <li>有货</li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"bbs\">\r\n        <h5>买家留言：</h5>\r\n        <textarea placeholder=\"建议留言前先与商家沟通确认\" class=\"remarks-cont\" v-model=\"msg\"></textarea>\r\n\r\n      </div>\r\n      <div class=\"line\"></div>\r\n      <div class=\"bill\">\r\n        <h5>发票信息：</h5>\r\n        <div>普通发票（电子） 个人 明细</div>\r\n        <h5>使用优惠/抵用</h5>\r\n      </div>\r\n    </div>\r\n    <div class=\"money clearFix\">\r\n      <ul>\r\n        <li>\r\n          <b><i>1</i>件商品，总商品金额</b>\r\n          <span>{{ orderList.totalAmount }}.00</span>\r\n        </li>\r\n        <li>\r\n          <b>返现：</b>\r\n          <span>0.00</span>\r\n        </li>\r\n        <li>\r\n          <b>运费：</b>\r\n          <span>0.00</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"trade\">\r\n      <div class=\"price\">应付金额:　<span>¥{{ orderList.totalAmount }}.00</span></div>\r\n      <div class=\"receiveInfo\">\r\n        寄送至:\r\n        <span>{{ userDefaultAddress.fullAddress }}</span>\r\n        收货人：<span>{{ userDefaultAddress.consignee }}</span>\r\n        <span>{{ userDefaultAddress.phoneNum }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"sub clearFix\">\r\n      <!-- 提交订单的时候，需要向服务器要数据 -->\r\n      <a href=\"\" class=\"subBtn\" @click=\"submitOrder\"></a>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reqsubmitOrder } from '@/api'\r\nimport {mapState} from 'vuex'\r\n  export default {\r\n    name: 'Trade',\r\n    data(){\r\n      return {\r\n        msg:''//买家留言\r\n      }\r\n    },\r\n    computed:{\r\n      ...mapState({\r\n        addressInfo:state=>state.trade.addressList,\r\n        orderList:state=>state.trade.tradeList\r\n      }),\r\n        //结算地址\r\n        userDefaultAddress(){\r\n          //find 返回符合条件的数据\r\n          return this.addressInfo.find(item=>item.isDefault==1) || []\r\n        }\r\n    },\r\n    methods:{\r\n      //修改默认地址\r\n      changeDefault(address,addressInfo){\r\n       // console.log(addressInfo==this.addressInfo) true\r\n          addressInfo.forEach(item => {\r\n              item.isDefault=0\r\n          })\r\n          address.isDefault=1\r\n      },\r\n      //不用vuex 进行请求\r\n      submitOrder(){\r\n        reqsubmitOrder\r\n      }\r\n    },\r\n    mounted(){\r\n      this.$store.dispatch('getAddressList')\r\n      this.$store.dispatch('getTradeList')\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .trade-container {\r\n    .title {\r\n      width: 1200px;\r\n      margin: 0 auto;\r\n      font-size: 14px;\r\n      line-height: 21px;\r\n    }\r\n\r\n    .content {\r\n      width: 1200px;\r\n      margin: 10px auto 0;\r\n      border: 1px solid rgb(221, 221, 221);\r\n      padding: 25px;\r\n      box-sizing: border-box;\r\n\r\n      .receive,\r\n      .pay {\r\n        line-height: 36px;\r\n        margin: 18px 0;\r\n      }\r\n\r\n      .address {\r\n        padding-left: 20px;\r\n        margin-bottom: 15px;\r\n\r\n        .username {\r\n          float: left;\r\n          width: 100px;\r\n          height: 30px;\r\n          line-height: 30px;\r\n          text-align: center;\r\n          border: 1px solid #ddd;\r\n          position: relative;\r\n        }\r\n\r\n        .username::after {\r\n          content: \"\";\r\n          display: none;\r\n          width: 13px;\r\n          height: 13px;\r\n          position: absolute;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: url(./images/choosed.png) no-repeat;\r\n        }\r\n\r\n        .username.selected {\r\n          border-color: #e1251b;\r\n        }\r\n\r\n        .username.selected::after {\r\n          display: block;\r\n        }\r\n\r\n        p {\r\n          width: 610px;\r\n          float: left;\r\n          line-height: 30px;\r\n          margin-left: 10px;\r\n          padding-left: 5px;\r\n          cursor: pointer;\r\n\r\n          .s1 {\r\n            float: left;\r\n\r\n          }\r\n\r\n          .s2 {\r\n            float: left;\r\n            margin: 0 5px;\r\n          }\r\n\r\n          .s3 {\r\n            float: left;\r\n            width: 56px;\r\n            height: 24px;\r\n            line-height: 24px;\r\n            margin-left: 10px;\r\n            background-color: #878787;\r\n            color: #fff;\r\n            margin-top: 3px;\r\n            text-align: center;\r\n          }\r\n        }\r\n\r\n        p:hover {\r\n          background-color: #ddd;\r\n        }\r\n      }\r\n\r\n      .line {\r\n        height: 1px;\r\n        background-color: #ddd;\r\n      }\r\n\r\n      .way {\r\n        width: 1080px;\r\n        height: 110px;\r\n        background: #f4f4f4;\r\n        padding: 15px;\r\n        margin: 0 auto;\r\n\r\n        h5 {\r\n          line-height: 50px;\r\n        }\r\n\r\n        .info {\r\n          margin-top: 20px;\r\n\r\n          .s1 {\r\n            float: left;\r\n            border: 1px solid #ddd;\r\n            width: 120px;\r\n            height: 30px;\r\n            line-height: 30px;\r\n            text-align: center;\r\n            margin-right: 10px;\r\n          }\r\n\r\n          p {\r\n            line-height: 30px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .detail {\r\n        width: 1080px;\r\n\r\n        background: #feedef;\r\n        padding: 15px;\r\n        margin: 2px auto 0;\r\n\r\n        h5 {\r\n          line-height: 50px;\r\n        }\r\n\r\n        .list {\r\n          display: flex;\r\n          justify-content: space-between;\r\n\r\n          li {\r\n            line-height: 30px;\r\n\r\n            p {\r\n\r\n              margin-bottom: 20px;\r\n            }\r\n\r\n            h4 {\r\n              color: #c81623;\r\n              font-weight: 400;\r\n            }\r\n\r\n            h3 {\r\n\r\n              color: #e12228;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .bbs {\r\n        margin-bottom: 15px;\r\n\r\n        h5 {\r\n          line-height: 50px;\r\n        }\r\n\r\n        textarea {\r\n          width: 100%;\r\n          border-color: #e4e2e2;\r\n          line-height: 1.8;\r\n          outline: none;\r\n          resize: none;\r\n        }\r\n      }\r\n\r\n      .bill {\r\n        h5 {\r\n          line-height: 50px;\r\n        }\r\n\r\n        div {\r\n          padding-left: 15px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .money {\r\n      width: 1200px;\r\n      margin: 20px auto;\r\n\r\n      ul {\r\n        width: 220px;\r\n        float: right;\r\n\r\n        li {\r\n          line-height: 30px;\r\n          display: flex;\r\n          justify-content: space-between;\r\n\r\n          i {\r\n            color: red;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .trade {\r\n      box-sizing: border-box;\r\n      width: 1200px;\r\n      padding: 10px;\r\n      margin: 10px auto;\r\n      text-align: right;\r\n      background-color: #f4f4f4;\r\n      border: 1px solid #ddd;\r\n\r\n      div {\r\n        line-height: 30px;\r\n      }\r\n\r\n      .price span {\r\n        color: #e12228;\r\n        font-weight: 700;\r\n        font-size: 14px;\r\n      }\r\n\r\n      .receiveInfo {\r\n        color: #999;\r\n      }\r\n    }\r\n\r\n    .sub {\r\n      width: 1200px;\r\n      margin: 0 auto 10px;\r\n\r\n      .subBtn {\r\n        float: right;\r\n        width: 164px;\r\n        height: 56px;\r\n        font: 700 18px \"微软雅黑\";\r\n        line-height: 56px;\r\n        text-align: center;\r\n        color: #fff;\r\n        background-color: #e1251b;\r\n\r\n      }\r\n    }\r\n\r\n  }\r\n</style>"],"mappings":"AA2FA,SAAAA,cAAA;AACA,SAAAC,QAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,GAAA;IACA;EACA;;EACAC,QAAA;IACA,GAAAJ,QAAA;MACAK,WAAA,EAAAC,KAAA,IAAAA,KAAA,CAAAC,KAAA,CAAAC,WAAA;MACAC,SAAA,EAAAH,KAAA,IAAAA,KAAA,CAAAC,KAAA,CAAAG;IACA;IACA;IACAC,mBAAA;MACA;MACA,YAAAN,WAAA,CAAAO,IAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAC,SAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,cAAAC,OAAA,EAAAZ,WAAA;MACA;MACAA,WAAA,CAAAa,OAAA,CAAAL,IAAA;QACAA,IAAA,CAAAC,SAAA;MACA;MACAG,OAAA,CAAAH,SAAA;IACA;IACA;IACAK,YAAA;MACApB,cAAA;IACA;EACA;EACAqB,QAAA;IACA,KAAAC,MAAA,CAAAC,QAAA;IACA,KAAAD,MAAA,CAAAC,QAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}