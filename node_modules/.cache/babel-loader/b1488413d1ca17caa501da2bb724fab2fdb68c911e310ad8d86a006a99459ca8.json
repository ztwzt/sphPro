{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Promise } from 'core-js';\nimport { reqGetCarList, reqDeleteCartById, reqUpdateCheckById } from '../../api';\nconst actions = {\n  async getShopCarList({\n    commit\n  }) {\n    let result = await reqGetCarList();\n    if (result.code == 200) {\n      commit('getShopCarList', result.data);\n    }\n  },\n  async deleteCart({\n    commit\n  }, skuId) {\n    let result = await reqDeleteCartById(skuId);\n    if (result.code == 200) {\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  async UpdateCheckById({\n    commit\n  }, {\n    skuId,\n    isChecked\n  }) {\n    let result = await reqUpdateCheckById(skuId, isChecked);\n    if (result.code == 200) {\n      return 'ok';\n    } else {\n      return Promise.reject(new Error('faile'));\n    }\n  },\n  //删除勾选的产品\n  deleteAllCheckCart({\n    dispatch,\n    getters\n  }) {\n    // console.log(context)\n    //返回值->promise->deleteCart\n    let promiseAll = [];\n    getters.carList.cartInfoList.forEach(item => {\n      let promise = item.isChecked == 1 ? dispatch('deleteCart', item.skuId) : '';\n      promiseAll.push(promise);\n    });\n    return Promise.all(promiseAll); //返回成功或者失败的结果\n  },\n\n  //修改全部产品的状态\n  updateAllCartChecked({\n    dispatch,\n    state\n  }, isChecked) {\n    let promiseAll = [];\n    state.cartList.cartInfoList.forEach(item => {\n      dispatch('UpdateCheckById', {\n        skuId: item.skuId,\n        isChecked\n      });\n    });\n    return Promise.all(promiseAll);\n  }\n};\nconst mutations = {\n  getShopCarList(state, data) {\n    state.shopCarList = data;\n  }\n};\nconst state = {\n  shopCarList: []\n};\nconst getters = {\n  carList(state) {\n    return state.shopCarList[0] || {};\n  }\n};\nexport default {\n  actions,\n  mutations,\n  state,\n  getters\n};","map":{"version":3,"names":["Promise","reqGetCarList","reqDeleteCartById","reqUpdateCheckById","actions","getShopCarList","commit","result","code","data","deleteCart","skuId","reject","Error","UpdateCheckById","isChecked","deleteAllCheckCart","dispatch","getters","promiseAll","carList","cartInfoList","forEach","item","promise","push","all","updateAllCartChecked","state","cartList","mutations","shopCarList"],"sources":["D:/MyProject/pro_sph/src/store/shopCar/index.js"],"sourcesContent":["import { Promise } from 'core-js'\r\nimport {reqGetCarList,reqDeleteCartById,reqUpdateCheckById} from '../../api'\r\nconst actions={\r\n    async getShopCarList({commit}){\r\n        let result= await reqGetCarList()\r\n        if(result.code==200)\r\n        {\r\n            commit('getShopCarList',result.data)\r\n        }\r\n    },\r\n    async deleteCart({commit},skuId){\r\n        let result= await reqDeleteCartById(skuId)\r\n        if(result.code==200)\r\n        {\r\n            return 'ok'\r\n        }else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    },\r\n    async UpdateCheckById({commit},{skuId,isChecked}){\r\n        let result= await reqUpdateCheckById(skuId,isChecked)\r\n        if(result.code==200)\r\n        {\r\n            return 'ok'\r\n        }else{\r\n            return Promise.reject(new Error('faile'))\r\n        }\r\n    },\r\n    //删除勾选的产品\r\n    deleteAllCheckCart({dispatch,getters}){\r\n        // console.log(context)\r\n        //返回值->promise->deleteCart\r\n        let promiseAll=[]\r\n        getters.carList.cartInfoList.forEach(item => {\r\n          let promise=item.isChecked==1 ? dispatch('deleteCart',item.skuId): ''\r\n          promiseAll.push(promise)\r\n        });\r\n        return Promise.all(promiseAll)//返回成功或者失败的结果\r\n    },\r\n    //修改全部产品的状态\r\n    updateAllCartChecked({dispatch,state},isChecked){\r\n        let promiseAll=[]\r\n        state.cartList.cartInfoList.forEach(item=>{\r\n           dispatch('UpdateCheckById',{skuId:item.skuId,isChecked})\r\n        })\r\n        return Promise.all(promiseAll)\r\n    }\r\n}\r\nconst mutations={\r\n    getShopCarList(state,data){\r\n        state.shopCarList=data\r\n    }\r\n}\r\nconst state={\r\n    shopCarList:[]\r\n}\r\nconst getters={\r\n    carList(state){\r\n        return state.shopCarList[0] || {}\r\n    }\r\n}\r\nexport default{\r\n    actions,\r\n    mutations,\r\n    state,\r\n    getters\r\n}"],"mappings":";AAAA,SAASA,OAAO,QAAQ,SAAS;AACjC,SAAQC,aAAa,EAACC,iBAAiB,EAACC,kBAAkB,QAAO,WAAW;AAC5E,MAAMC,OAAO,GAAC;EACV,MAAMC,cAAcA,CAAC;IAACC;EAAM,CAAC,EAAC;IAC1B,IAAIC,MAAM,GAAE,MAAMN,aAAa,CAAC,CAAC;IACjC,IAAGM,MAAM,CAACC,IAAI,IAAE,GAAG,EACnB;MACIF,MAAM,CAAC,gBAAgB,EAACC,MAAM,CAACE,IAAI,CAAC;IACxC;EACJ,CAAC;EACD,MAAMC,UAAUA,CAAC;IAACJ;EAAM,CAAC,EAACK,KAAK,EAAC;IAC5B,IAAIJ,MAAM,GAAE,MAAML,iBAAiB,CAACS,KAAK,CAAC;IAC1C,IAAGJ,MAAM,CAACC,IAAI,IAAE,GAAG,EACnB;MACI,OAAO,IAAI;IACf,CAAC,MAAI;MACD,OAAOR,OAAO,CAACY,MAAM,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC7C;EACJ,CAAC;EACD,MAAMC,eAAeA,CAAC;IAACR;EAAM,CAAC,EAAC;IAACK,KAAK;IAACI;EAAS,CAAC,EAAC;IAC7C,IAAIR,MAAM,GAAE,MAAMJ,kBAAkB,CAACQ,KAAK,EAACI,SAAS,CAAC;IACrD,IAAGR,MAAM,CAACC,IAAI,IAAE,GAAG,EACnB;MACI,OAAO,IAAI;IACf,CAAC,MAAI;MACD,OAAOR,OAAO,CAACY,MAAM,CAAC,IAAIC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC7C;EACJ,CAAC;EACD;EACAG,kBAAkBA,CAAC;IAACC,QAAQ;IAACC;EAAO,CAAC,EAAC;IAClC;IACA;IACA,IAAIC,UAAU,GAAC,EAAE;IACjBD,OAAO,CAACE,OAAO,CAACC,YAAY,CAACC,OAAO,CAACC,IAAI,IAAI;MAC3C,IAAIC,OAAO,GAACD,IAAI,CAACR,SAAS,IAAE,CAAC,GAAGE,QAAQ,CAAC,YAAY,EAACM,IAAI,CAACZ,KAAK,CAAC,GAAE,EAAE;MACrEQ,UAAU,CAACM,IAAI,CAACD,OAAO,CAAC;IAC1B,CAAC,CAAC;IACF,OAAOxB,OAAO,CAAC0B,GAAG,CAACP,UAAU,CAAC;EAClC,CAAC;;EACD;EACAQ,oBAAoBA,CAAC;IAACV,QAAQ;IAACW;EAAK,CAAC,EAACb,SAAS,EAAC;IAC5C,IAAII,UAAU,GAAC,EAAE;IACjBS,KAAK,CAACC,QAAQ,CAACR,YAAY,CAACC,OAAO,CAACC,IAAI,IAAE;MACvCN,QAAQ,CAAC,iBAAiB,EAAC;QAACN,KAAK,EAACY,IAAI,CAACZ,KAAK;QAACI;MAAS,CAAC,CAAC;IAC3D,CAAC,CAAC;IACF,OAAOf,OAAO,CAAC0B,GAAG,CAACP,UAAU,CAAC;EAClC;AACJ,CAAC;AACD,MAAMW,SAAS,GAAC;EACZzB,cAAcA,CAACuB,KAAK,EAACnB,IAAI,EAAC;IACtBmB,KAAK,CAACG,WAAW,GAACtB,IAAI;EAC1B;AACJ,CAAC;AACD,MAAMmB,KAAK,GAAC;EACRG,WAAW,EAAC;AAChB,CAAC;AACD,MAAMb,OAAO,GAAC;EACVE,OAAOA,CAACQ,KAAK,EAAC;IACV,OAAOA,KAAK,CAACG,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;EACrC;AACJ,CAAC;AACD,eAAc;EACV3B,OAAO;EACP0B,SAAS;EACTF,KAAK;EACLV;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}